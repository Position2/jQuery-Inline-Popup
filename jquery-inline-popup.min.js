/* JQuery Inline Popup - https://github.com/Position2/jQuery-Inline-Popup */
!function(a){var b={itemSelector:"",ipclass:"inlinepopup",ipcloseclass:"inlinepopupClose",iparrowclass:"inlinepopup_arrow",ipcontentwrapperclass:"inlinepopup_content",descriptionElem:"ip-details",activeFirst:!0,scrollToViewPort:!0,arrow:!0,scrollOffset:0,closeinnerelem:"<i class='fa fa-close'></i>"};a.fn.isOnScreen=function(){var b=a(window),c={top:b.scrollTop(),left:b.scrollLeft()},d=this.offset();return c.right=c.left+b.width(),c.bottom=c.top+b.height(),d.right=d.left+this.outerWidth(),d.bottom=d.top+this.outerHeight(),!(c.right<d.left||c.left>d.right||c.bottom<d.top||c.top>d.bottom)},a.fn.inlinePopup=function(c){if(0===this.length)return this;if(this.length>1)return this.each(function(){a(this).inlinePopup(c)}),this;var d={},e=this,f=function(){d.settings=a.extend({},b,c);var f=a(e).find(d.settings.itemSelector);f.size()<=0?console.log("Selector not present"):(e.setDataRow(),f.click(function(){var b=a(this);b.hasClass("active")?k(a(e).find("."+d.settings.ipclass)):(h(b,b.siblings(d.settings.itemSelector).filter(".active")),b.addClass("active").siblings(d.settings.itemSelector).removeClass("active"))}),d.settings.activeFirst&&l())},g=function(){var b=a("<div/>",{class:d.settings.ipclass}),c=a("<div/>",{class:d.settings.iparrowclass}).hide(),e=a("<div/>",{class:d.settings.ipcontentwrapperclass}),f=a("<span/>",{class:d.settings.ipcloseclass,html:d.settings.closeinnerelem});return c.add(e).add(f).appendTo(b),b},h=function(b,c,f){var b=b||a(e).find(d.settings.itemSelector).filter(".active"),h=c||"",f="boolean"!=typeof f||f,k=b.attr("data-row"),l=""!=h?h.attr("data-row"):0,m=a(e).find(d.settings.itemSelector).filter("[data-row='"+k+"']:visible");descElem=a(e).find("."+d.settings.ipclass).size()<1?g().hide():a(e).find("."+d.settings.ipclass).css("height",""),dpCont=b.find("."+d.settings.descriptionElem).html()||"",descElem.find("."+d.settings.ipcontentwrapperclass).html(dpCont),l!=k?descElem.hide():"",descElem.insertAfter(m.last()),""!=dpCont.trim()?d.settings.scrollToViewPort&&f?j(b,function(){descElem.stop().slideDown(function(){d.settings.scrollToViewPort&&a(e).isOnScreen()&&k!=l&&j(b)})}):descElem.stop().slideDown():descElem.hide(),d.settings.arrow?i(b,descElem):""},i=function(a,b){var c=b.find("."+d.settings.iparrowclass),e=a.position().left+(a.outerWidth()/2-c.outerWidth()/2);c.css({left:e+"px"}).show()},j=function(b,c){var e=b.offset().top-d.settings.scrollOffset,f=a("html, body"),g=Math.abs(f.scrollTop()-e);e>10&&g>10?f.stop().animate({scrollTop:e},c):"function"==typeof c?c():""},k=function(b){a(b).stop().slideUp(function(){a(this).siblings(d.settings.itemSelector).filter(".active").removeClass("active"),a(this).remove()})},l=function(){a(e).find(d.settings.itemSelector).eq(0).addClass("active"),h(null,null,!1)};return this.setDataRow=function(){var b=a(e).find(d.settings.itemSelector).filter(":visible").offset().left,c=0;return a(e).find("."+d.settings.ipclass).hide(),a(e).find(d.settings.itemSelector).filter(":visible").each(function(){var d=a(this),e=d.offset().left;b==e&&(c+=1),d.attr("data-row",c)}),e},f(),a("body").on("click","."+d.settings.ipclass+" ."+d.settings.ipcloseclass,function(b){k(a(this).parents("."+d.settings.ipclass)[0])}),a(window).resize(function(){e.setDataRow(),a(e).find(d.settings.itemSelector).filter(".active").size()>0&&h(null,null,a(e).isOnScreen())}),this}}(jQuery);